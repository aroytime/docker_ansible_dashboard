# docker_ansible_dashboard

dockeréƒ¨ç½²æ•°æ®å¤§å±æœŸæœ«ä½œä¸š

# About æœ¬é¡¹ç›®

æœ¬é¡¹ç›®åŸºäº **Flask** æ¡†æ¶å¼€å‘ï¼Œç»“åˆ **Ansible** å’Œ **Docker** å®ç°äº†ä¸€ä¸ªç®€å•æ˜“ç”¨çš„ä¸»æœºçŠ¶æ€ç›‘æ§ä¸ç®¡ç†å¹³å°ã€‚
ç”¨æˆ·å¯ä»¥é€šè¿‡å‰ç«¯ç•Œé¢ï¼Œæ–¹ä¾¿åœ°è¿›è¡Œä¸»æœºä¿¡æ¯çš„æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹ä¸æŸ¥è¯¢æ“ä½œã€‚

### ä¸»è¦åŠŸèƒ½

* åŸºäº Web çš„ä¸»æœºç®¡ç†ç•Œé¢ï¼Œæ”¯æŒåŠ¨æ€å¢åˆ æ”¹æŸ¥
* è‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤ Docker ç½‘ç»œå†²çªï¼Œä¿éšœå®¹å™¨ç½‘ç»œç¨³å®š
* æ”¯æŒæ‰¹é‡ SSH å¯†é’¥åˆ†å‘ä¸é…ç½®ï¼Œç®€åŒ–è¿œç¨‹ç®¡ç†
* é•œåƒä¸Šä¼ è‡³é˜¿é‡Œäº‘å®¹å™¨é•œåƒä»“åº“ï¼Œæ–¹ä¾¿äº‘ç«¯éƒ¨ç½²

### æŠ€æœ¯æ ˆ

* åç«¯ï¼šPython3 + Flask + Ansible
* å‰ç«¯ï¼šHTML + CSS + JavaScript
* å®¹å™¨ï¼šDocker + Shell è„šæœ¬è‡ªåŠ¨åŒ–ç®¡ç†
  å½“ç„¶å¯ä»¥ï¼æ ¹æ®ä½ æä¾›çš„é¡¹ç›®ç»“æ„ï¼Œæˆ‘ä¸ºä½ ç”Ÿæˆä¸€ä¸ªåˆæ­¥çš„ `README.md` æ–‡ä»¶è‰ç¨¿ï¼ŒåŒ…å« About é¡¹ã€é¡¹ç›®ç»“æ„è¯´æ˜ã€ä¸»è¦åŠŸèƒ½ç®€è¿°ã€ä½¿ç”¨æ–¹å¼ã€Docker éƒ¨ç½²ç­‰å†…å®¹ã€‚ä½ å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›ä¸€æ­¥è¡¥å……ã€‚

---

## ğŸ“Œ About

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº **Flask + Ansible** å®ç°çš„ä¸»æœºçŠ¶æ€ç›‘æ§ä¸ç®¡ç†å¹³å°ã€‚å®ƒé€šè¿‡ Web å‰ç«¯æä¾›å›¾å½¢åŒ–æ“ä½œç•Œé¢ï¼Œæ”¯æŒå¯¹ä¸»æœºåˆ—è¡¨çš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œå¹¶ç»“åˆ Docker è‡ªåŠ¨åŒ–ç®¡ç†ç½‘ç»œé…ç½®ï¼ˆå¦‚ç½‘æ®µå†²çªæ£€æµ‹ä¸è‡ªåŠ¨ä¿®å¤ï¼‰åŠŸèƒ½ã€‚é€‚ç”¨äºå¯¹å¤šä¸»æœºç¯å¢ƒçš„ç»Ÿä¸€è¿ç»´ç®¡ç†éœ€æ±‚ã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ app/                          # Flask åº”ç”¨ä¸»ç›®å½•
â”‚Â Â  â”œâ”€â”€ app.py                    # ä¸»ç¨‹åºå…¥å£
â”‚Â Â  â”œâ”€â”€ hosts                     # ä¸»æœºä¿¡æ¯æ–‡ä»¶ï¼ˆå­˜å‚¨æ ¼å¼æ”¯æŒè‡ªå®šä¹‰ï¼‰
â”‚Â Â  â”œâ”€â”€ requirements.txt          # Pythonä¾èµ–é¡¹
â”‚Â Â  â”œâ”€â”€ start.sh                  # å¯åŠ¨è„šæœ¬ï¼ˆç”¨äºå®¹å™¨å…¥å£ï¼‰
â”‚Â Â  â”œâ”€â”€ static/                   # é™æ€èµ„æº
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ script.js             # å‰ç«¯é€»è¾‘è„šæœ¬
â”‚Â Â  â”‚Â Â  â””â”€â”€ style.css             # æ ·å¼è¡¨
â”‚Â Â  â””â”€â”€ templates/                # Jinja2 HTML æ¨¡æ¿
â”‚Â Â      â”œâ”€â”€ dashboard.html        # ä»ªè¡¨ç›˜é¡µé¢
â”‚Â Â      â”œâ”€â”€ hosts.html            # ä¸»æœºç®¡ç†é¡µé¢
â”‚Â Â      â””â”€â”€ login.html            # ç™»å½•é¡µé¢
â”œâ”€â”€ Dockerfile                    # æ„å»º Flask æœåŠ¡çš„ Docker é•œåƒ
â”œâ”€â”€ docker_net_config.sh          # Docker ç½‘ç»œé…ç½®æ£€æµ‹ä¸ä¿®å¤è„šæœ¬
â”œâ”€â”€ hosts_info.txt                # ç¤ºä¾‹ä¸»æœºä¿¡æ¯ï¼ˆç”¨äºæµ‹è¯•ï¼‰
â”œâ”€â”€ push_to_aliyun_interactive.sh # é˜¿é‡Œäº‘é•œåƒä»“åº“äº¤äº’å¼ä¸Šä¼ è„šæœ¬
â””â”€â”€ docker_build__setup_and_configure_hosts_ssh.sh    # æ„å»ºé•œåƒå¹¶å¯åŠ¨å®¹å™¨ï¼Œæ‰¹é‡è®¾ç½® SSH ç™»å½•è„šæœ¬
```

---

## ğŸš€ åŠŸèƒ½ç‰¹è‰²

* âœ… åŸºäº Flask å®ç°çš„ Web å‰ç«¯ç®¡ç†ç•Œé¢
* âœ… æ”¯æŒä¸»æœºä¿¡æ¯å¢åˆ æ”¹æŸ¥
* âœ… é›†æˆ Ansible å®ç°è¿œç¨‹å‘½ä»¤æ‰§è¡Œä¸çŠ¶æ€é‡‡é›†
* âœ… è‡ªåŠ¨æ£€æµ‹ Docker ç½‘ç»œå†²çªï¼ŒåŠ¨æ€åˆ†é…å¯ç”¨ç½‘æ®µ
* âœ… è‡ªåŠ¨ä¿®å¤ç½‘ç»œå¹¶é‡å¯å®¹å™¨
* âœ… æ”¯æŒå°†é•œåƒä¸Šä¼ è‡³é˜¿é‡Œäº‘å®¹å™¨é•œåƒä»“åº“
* âœ… è‡ªåŠ¨æ„å»ºé•œåƒä¸å¯åŠ¨å®¹å™¨
* âœ… æ‰¹é‡ SSH é…ç½®ä¸ç®¡ç†



## ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•

### 1. å…‹éš†é¡¹ç›®

```bash
https://github.com/aroytime/docker_ansible_dashboard.git
cd docker_ansible_dashboard
```

### 2. æ‰§è¡Œè„šæœ¬æ„å»ºé•œåƒå¹¶é…ç½®ssh

```bash
bash docker_build__setup_and_configure_hosts_ssh.sh
```

> Docker æ„å»ºéƒ¨ç½²
>
> ```bash
> docker build -t host-monitor .
> docker run -d  -p 5000:5000 --name dashboard host-monitor
> ```

### 3.è®¿é—®ç•Œé¢

> æµè§ˆå™¨è®¿é—®
>
> http://{å®¿ä¸»æœºIP}:5000
>
> ç”¨æˆ·åï¼šadmin
>
> å¯†ç ï¼š123456
![æŸ¥çœ‹ 1.png åŸå›¾](images/1.png)

![æŸ¥çœ‹ 2.png åŸå›¾](images/2.png)

### 4.ç®¡ç†ä¸»æœº

> å¯åœ¨çº¿å¯¹ä¸»æœºé•œåƒå¢åŠ ï¼Œä¿®æ”¹å’Œåˆ é™¤
![æŸ¥çœ‹ 1.png åŸå›¾](images/3.png)

## ğŸ³ Docker ç½‘ç»œç®¡ç†è„šæœ¬ä½¿ç”¨

```bash
# è‡ªåŠ¨æ£€æµ‹å†²çªã€ä¿®å¤å¹¶é‡å¯æŒ‡å®šå®¹å™¨/æœåŠ¡
bash docker_net_config.sh
```

---

## ğŸ” SSH æ‰¹é‡é…ç½®

```bash
bash docker_build__setup_and_configure_hosts_ssh.sh
# æ”¯æŒè®¾ç½®ä¸»æœº SSH å¯†é’¥è¿æ¥ï¼Œæ‰¹é‡æ¨é€ ~/.ssh/id_rsa.pub
```

---

## ğŸ“¤ æ¨é€é•œåƒåˆ°é˜¿é‡Œäº‘

```bash
bash push_to_aliyun_interactive.sh
# äº¤äº’å¼è¾“å…¥é•œåƒåã€ç‰ˆæœ¬å·å’Œä»“åº“åœ°å€
```

